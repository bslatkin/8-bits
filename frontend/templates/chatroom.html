{% extends "base.html" %}

{% block title %}8-bits: {{shard_id}}{% endblock %}

{% block additional_css %}

<link rel="stylesheet" href="/static/{{cache_buster}}/css/chatbox.css">
<link rel="stylesheet" href="/static/{{cache_buster}}/css/chatroom.css">
<link rel="stylesheet" href="/static/{{cache_buster}}/css/common.css">
<link rel="stylesheet" href="/static/{{cache_buster}}/css/footer.css">
<link rel="stylesheet" href="/static/{{cache_buster}}/css/posts.css">
<link rel="stylesheet" href="/static/{{cache_buster}}/css/settings.css">

{% endblock additional_css %}


{% block additional_js %}

<script src='/_ah/channel/jsapi'></script>

{% if js_mode == 'raw' %}
  <script type="text/javascript" src="/js/closure/goog/base.js"></script>
  <script type="text/javascript" src="/js/bits/deps.js"></script>
  <script type="text/javascript">
    goog.require('bits.startup');
  </script>
{% endif %}

{% endblock additional_js %}


{% block body %}

<div class="content-wrapper">
  <div class="bits-chatbox-container">
    <div id="chatbox" class="bits-chatbox">
      <div class="goog-splitpane-first-container">
        <div class="bits-post-container"></div>
      </div>
      <div class="goog-splitpane-second-container">
        <textarea class="bits-chat-input"></textarea>
      </div>
      <div class="goog-splitpane-handle"></div>
    </div>
  </div>
</div>

<div class="bits-footer-bar" id="footer-bar">
  <div class="bits-footer-settings-left">
    <span id="nickname-display">{{nickname}}</span>

    <a href="javascript:void(0)" id="nickname-change"
        class="bits-setting-link small" title="Update your look">change</a>

    <a href="javascript:void(0)" class="bits-setting-link" id="see-roster"
        title="See who else is present">who's here?</a>

    <a href="javascript:void(0)" id="get-shorturl" class="bits-setting-link"
        title="Shard this ephemera with other people">share this</a>
  </div>

  <a href="/" target="_blank" title="About 8-bits of ephemera"><img src="/static/{{cache_buster}}/logo_wide.png" height="24" width="185"
        alt="8-bits of ephemera" class="footer-logo" border="0"></a>

  <div class="bits-footer-settings-right">
    <a href="http://a.quil.la/LHAXG" target="_blank"
        title="Report a bug">report a bug</a>
  </div>
</div>

<div class="bits-dialog" id="settings-dialog">
  <div>
    <label for="setting-nickname" class="large">Set your Nickname</label>
    <br>
    <input type="text" name="nickname"
        id="setting-nickname" class="title" value="{{nickname}}">
  </div>

  <div id="settings-terms">
    By clicking below I agree to the terms of use for
    8-bits of ephemera, which are available
    <a title="View the Terms of Service" href="/terms"
        target="_blank">on this page</a>.
  </div>
</div>

<div class="bits-dialog" id="link-dialog">
  <label for="link-shorturl" class="large">
      Copy and paste this URL to share
  </label>
  <br>
  <input type="text" name="nickname" id="link-shorturl" class="title"
      value="{{short_url_prefix}}/chat/{{shard_id}}" readonly="readonly">
</div>

<audio id="bits-sound-receivechat" preload>
  <source src="/static/{{cache_buster}}/sounds/receivechat.mp3"></source>
  <source src="/static/{{cache_buster}}/sounds/receivechat.ogg"></source>
</audio>

<script>
  bits.startup({{params|safe}});
</script>

{% endblock body %}
